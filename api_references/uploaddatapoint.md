
# uploadDataPoint

### Description

Use **HTTPs POST** to upload data points

### Request URL

```
https://api.mediatek.com/mcs/v2/devices/:device_id/datapoints

```

### Action
HTTPs POST

### Parameters

#### Header

Device Key
```
<<<<<<< HEAD
deviceKey: `device_key_here`
=======
deviceKey: device_key_here
>>>>>>> 1982e2ab8092481d991dd4975cb6f14dc4d37916
```

For Comma Separated Value (CSV) format:
```
Content-Type: text/csv
```
For JSON format:
```
Content-Type:`application/json`
```


#### Body

#####For CSV format:

Syntax:

*:Data_Channel_Id_1, :Timestamp, :Value_1, :Value_2, :Value_3\n*

*:Data_Channel_Id_2, :Timestamp, :Value_1\n*

For DataChannel that serves as controller (eg. sending socket command), please add an * before the :Data_Channel_Id

**:Data_Channel_Id_2, :Timestamp, :Value_1\n*

Timestamp are received and returned in ISO 8601 format, with 3 decimal fraction of a second:

```
YYYY-MM-DDTHH:MM:SS.nnnZ
```

Note: Leave *:Timestamp* field empty (but keep the commas) if device does not wish to generate its own timestamp, the timestamp will be generated by MCS upon receiving this datapoint.

Example:
```
1,2014-12-0714:00:32.345Z,26
2,,26.34
*3,,40.783121,-73.965328,0
```
Line 1: Data Channel Id = 1, with a given timestamp, 26 is the value of this datapoint (in this case the data type pre-defined as integer)

Line 2: Data Channel Id = 2, with no given timestamp (therefore MCS will generate, 26.34 is the value of this data point (in this case the data type pre-defined as float)

Line 3: * indicates a Controller type Data Channel, with Data Channel Id = 3, with no given timestamp (same as Line 2), 40.783121,-73.965328,0 is the value of a GPS co-ordinates (in this case the data type is pre-defined as GPS)


#####For JSON format

Syntax:

each JSON representation of a datapoint is wrap around with

*dataChnId, timestamp, values*

values is the context of the datapoint value, for most cases represented by value pair. for GPS case will be represented as three key values.

For DataChannel that serves as controller (eg. sending socket command), the command context is wrap around by *commands*

```
{

  "datapoints" : [
    {
      "dataChnld" : 1,
      "timestamp" : "2014-12-0714:00:32.345Z,26",
      "values" {
        "value" : 26
        }
    },
    {
      "dataChnId" : 2,
      "values" {
        "value" : 26.34
        }
    }
    {
      "dataChnId" : 3,
      "commmands" {
        "latitude" : 40.783121,
        "longitude" : -73.965328,
        "altitude" : 0
        }
    } ]

```
Item 1: Data Channel Id = 1, with a given timestamp, 26 is the value of this datapoint (in this case the data type pre-defined as integer)

Item 2: Data Channel Id = 2, with no given timestamp (therefore MCS will generate, 26.34 is the value of this data point (in this case the data type pre-defined as float)

Item 3: Indicates a Controller type Data Channel, with Data Channel Id = 3, with no given timestamp (same as Line 2), 40.783121,-73.965328,0 is the value of a GPS co-ordinates (in this case the data type is pre-defined as GPS)


### Response

#### Response Code
200

#### Response Header

Content-Type:`application/json`
#### Response Body

***Data Format: JSON***

The response body will construct in JSON format with the following fields:

| Field Name | Type |Description|
| --- | --- | --- |
| createdAt | Number | Command created timestamp |


**Example: **

Request URL
```
https://api.mediatek.com/mcs/v2/devices/d1234567890/datapoints
```

Request Body

```
1,,100,99\n
2,33.45,This is my data point\n
3,0\n


```

Response Body

```
{
    "createdAt": "2014-12-0714:00:35.345Z,26"
}
```

### Error Response

When error is incurred, the response code will be non-200 and the response body will construct in JSON format with the following fields:

| Field Name | Type |Description|
| --- | --- | --- |
| code | Integer | Error Code |
| url | String | url to API Error detail page |
| description | String | Error Description |

**Example:**

```
{
  "results": {
    "code": 1002,
    "url": "http://mcs.mediatek.com/v2/api_errorcode?code=1002",
    "description": "You do not have access right to this API"
  }
}
```



